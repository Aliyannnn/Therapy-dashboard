{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\n\n\n// API Base URL - Update this to your backend URL\nexport const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\n\nexport const apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'ngrok-skip-browser-warning': 'true', // ← ADD THIS\n  },\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('auth_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Clear token and redirect to login\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('user_type');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const API_ENDPOINTS = {\n  // Admin endpoints\n  ADMIN_VERIFY_CODE: '/dashboard/api/v1/dashboard/admin/verify-code',\n  ADMIN_LOGIN: '/dashboard/api/v1/dashboard/admin/login',\n  ADMIN_CREATE_USER: '/dashboard/api/v1/dashboard/admin/users/create',\n  ADMIN_GET_USERS: '/dashboard/api/v1/dashboard/admin/users', // LEGACY: Dashboard users only\n  ADMIN_GET_ALL_USERS: '/dashboard/api/v1/dashboard/admin/all-users', // NEW: All users with filter\n  ADMIN_GET_USER: (userId: string) => `/dashboard/api/v1/dashboard/admin/users/${userId}`,\n  ADMIN_UPDATE_USER: (userId: string) => `/dashboard/api/v1/dashboard/admin/users/${userId}`,\n  ADMIN_DELETE_USER: (userId: string) => `/dashboard/api/v1/dashboard/admin/users/${userId}`,\n  ADMIN_REACTIVATE_USER: (userId: string) => `/dashboard/api/v1/dashboard/admin/users/${userId}/reactivate`, // NEW\n  ADMIN_STATS: '/dashboard/api/v1/dashboard/admin/stats',\n  ADMIN_ACTIVITY: '/dashboard/api/v1/dashboard/admin/activity',\n  ADMIN_ALL_SESSIONS: '/dashboard/api/v1/dashboard/admin/sessions',\n  ADMIN_USER_HISTORY: (userId: string) => `/dashboard/api/v1/dashboard/admin/users/${userId}/history`,\n\n  // User endpoints\n  USER_LOGIN: '/dashboard/api/v1/dashboard/user/login',\n  \n  // Session endpoints\n  SESSION_CREATE: '/dashboard/api/v1/dashboard/sessions/create',\n  SESSION_MY_SESSIONS: '/dashboard/api/v1/dashboard/sessions/my-sessions',\n  SESSION_ANALYZE: (sessionId: string) => `/dashboard/api/v1/dashboard/sessions/${sessionId}/analyze`,\n  \n  // Chat endpoints\n  CHAT_MESSAGE: '/dashboard/api/v1/dashboard/chat/message',\n  CHAT_AUDIO: '/dashboard/api/v1/dashboard/chat/audio',\n  \n  // Report endpoints\n  REPORT_GENERATE: (sessionId: string) => `/dashboard/api/v1/dashboard/sessions/${sessionId}/report`,\n  REPORT_DOWNLOAD: (sessionId: string) => `/dashboard/api/v1/dashboard/reports/${sessionId}/download`,\n};\n\n// Auth helpers\nexport const saveAuthToken = (token: string, userType: 'admin' | 'user') => {\n  localStorage.setItem('auth_token', token);\n  localStorage.setItem('user_type', userType);\n};\n\nexport const updateUser = async (userId: string, data: any) => {\n  return apiClient.put(`/dashboard/api/v1/dashboard/admin/users/${userId}`, data);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem('auth_token');\n};\n\nexport const getUserType = (): 'admin' | 'user' | null => {\n  return localStorage.getItem('user_type') as 'admin' | 'user' | null;\n};\n\nexport const clearAuth = () => {\n  localStorage.removeItem('auth_token');\n  localStorage.removeItem('user_type');\n};\n\nexport const isAuthenticated = () => {\n  return !!getAuthToken();\n};\n\n\n/**\n * Download session report as PDF\n * @param sessionId - The session ID to download report for\n * @returns Promise with blob data\n */\nexport const downloadSessionReport = async (sessionId: string) => {\n  return apiClient.get(API_ENDPOINTS.REPORT_DOWNLOAD(sessionId), {\n    responseType: 'blob',\n  });\n};\n\n/**\n * Helper function to trigger browser download of a blob\n * @param blob - The blob data to download\n * @param filename - The filename to save as\n */\nexport const triggerBrowserDownload = (blob: Blob, filename: string) => {\n  const url = window.URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.setAttribute('download', filename);\n  document.body.appendChild(link);\n  link.click();\n  link.remove();\n  window.URL.revokeObjectURL(url);\n};\n\n/**\n * Generate report for a session\n * @param sessionId - The session ID to generate report for\n */\nexport const generateSessionReport = async (sessionId: string) => {\n  return apiClient.post(API_ENDPOINTS.REPORT_GENERATE(sessionId));\n};\n\n// ═══════════════════════════════════════════════════════════════════════════\n// API Helper Functions - Sessions\n// ═══════════════════════════════════════════════════════════════════════════\n\n/**\n * Get all sessions (admin only)\n * @param status - Filter by status\n */\nexport const getAllSessions = async (status?: string) => {\n  const params: any = {};\n  if (status) params.status = status;\n  return apiClient.get(API_ENDPOINTS.ADMIN_ALL_SESSIONS, { params });\n};\n\n/**\n * Get user's own sessions\n */\nexport const getMySessions = async () => {\n  return apiClient.get(API_ENDPOINTS.SESSION_MY_SESSIONS);\n};\n\n/**\n * Create a new session\n */\nexport const createSession = async (data: { session_type: 'web' | 'vr' }) => {\n  return apiClient.post(API_ENDPOINTS.SESSION_CREATE, data);\n};\n\n/**\n * Analyze a session\n * @param sessionId - The session ID to analyze\n */\nexport const analyzeSession = async (sessionId: string) => {\n  return apiClient.post(API_ENDPOINTS.SESSION_ANALYZE(sessionId));\n};\n\n/**\n * Get user activity history (admin only)\n * @param userId - The user ID to get history for\n */\nexport const getUserHistory = async (userId: string) => {\n  return apiClient.get(API_ENDPOINTS.ADMIN_USER_HISTORY(userId));\n};\n\n// ═══════════════════════════════════════════════════════════════════════════\n// API Helper Functions - Admin Stats & Activity\n// ═══════════════════════════════════════════════════════════════════════════\n\n/**\n * Get admin dashboard statistics\n */\nexport const getAdminStats = async () => {\n  return apiClient.get(API_ENDPOINTS.ADMIN_STATS);\n};\n\n/**\n * Get recent activity log\n */\nexport const getAdminActivity = async () => {\n  return apiClient.get(API_ENDPOINTS.ADMIN_ACTIVITY);\n};\n\n// ═══════════════════════════════════════════════════════════════════════════\n// API Helper Functions - User Management\n// ═══════════════════════════════════════════════════════════════════════════\n\n/**\n * Get all users (VR + Dashboard) with optional filtering\n * @param skip - Number of users to skip (pagination)\n * @param limit - Maximum users to return\n * @param userType - Filter by user type: 'vr', 'dashboard', or undefined for all\n * @param includeInactive - Include deactivated users\n */\nexport const getAllUsers = async (\n  skip = 0,\n  limit = 100,\n  userType?: 'vr' | 'dashboard',\n  includeInactive = false\n) => {\n  const params = new URLSearchParams({\n    skip: skip.toString(),\n    limit: limit.toString(),\n    include_inactive: includeInactive.toString(),\n  });\n\n  if (userType) {\n    params.append('user_type', userType);\n  }\n\n  return apiClient.get(`${API_ENDPOINTS.ADMIN_GET_ALL_USERS}?${params.toString()}`);\n};\n\n/**\n * LEGACY: Get dashboard users only (kept for backward compatibility)\n */\nexport const getDashboardUsers = async (skip = 0, limit = 100) => {\n  return apiClient.get(`${API_ENDPOINTS.ADMIN_GET_USERS}?skip=${skip}&limit=${limit}`);\n};\n\n/**\n * Get specific user details (works for VR and Dashboard users)\n */\nexport const getUserDetails = async (userId: string) => {\n  return apiClient.get(API_ENDPOINTS.ADMIN_GET_USER(userId));\n};\n\n/**\n * Create new dashboard user\n */\nexport const createDashboardUser = async (data: {\n  name: string;\n  email?: string;\n  phone?: string;\n  notes?: string;\n}) => {\n  return apiClient.post(API_ENDPOINTS.ADMIN_CREATE_USER, data);\n};\n\n/**\n * Update user information (type-aware on backend)\n * For VR users: only name, email, is_active will be updated\n * For Dashboard users: all fields can be updated\n */\nexport const updateUserInfo = async (\n  userId: string,\n  data: {\n    name?: string;\n    email?: string;\n    phone?: string;\n    notes?: string;\n    is_active?: boolean;\n  }\n) => {\n  return apiClient.put(API_ENDPOINTS.ADMIN_UPDATE_USER(userId), data);\n};\n\n/**\n * Deactivate user (soft delete - works for VR and Dashboard users)\n */\nexport const deactivateUser = async (userId: string) => {\n  return apiClient.delete(API_ENDPOINTS.ADMIN_DELETE_USER(userId));\n};\n\n/**\n * Reactivate a deactivated user\n */\nexport const reactivateUser = async (userId: string) => {\n  return apiClient.post(API_ENDPOINTS.ADMIN_REACTIVATE_USER(userId));\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/lib/store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { User, Session, Message } from './types';\n\ninterface AuthState {\n  user: User | null;\n  userType: 'admin' | 'user' | null;\n  isAuthenticated: boolean;\n  setUser: (user: User | null, userType: 'admin' | 'user' | null) => void;\n  logout: () => void;\n}\n\nexport const useAuthStore = create<AuthState>((set) => ({\n  user: null,\n  userType: null,\n  isAuthenticated: false,\n  setUser: (user, userType) => set({ user, userType, isAuthenticated: !!user }),\n  logout: () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user_type');\n    set({ user: null, userType: null, isAuthenticated: false });\n  },\n}));\n\ninterface ChatState {\n  currentSession: Session | null;\n  messages: Message[];\n  setCurrentSession: (session: Session | null) => void;\n  addMessage: (message: Message) => void;\n  clearMessages: () => void;\n  setMessages: (messages: Message[]) => void;\n}\n\nexport const useChatStore = create<ChatState>((set) => ({\n  currentSession: null,\n  messages: [],\n  setCurrentSession: (session) => set({ currentSession: session }),\n  addMessage: (message) => set((state) => ({ messages: [...state.messages, message] })),\n  clearMessages: () => set({ messages: [] }),\n  setMessages: (messages) => set({ messages }),\n}));\n\ninterface UIState {\n  sidebarOpen: boolean;\n  toggleSidebar: () => void;\n  setSidebarOpen: (open: boolean) => void;\n}\n\nexport const useUIStore = create<UIState>((set) => ({\n  sidebarOpen: true,\n  toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),\n  setSidebarOpen: (open) => set({ sidebarOpen: open }),\n}));\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAWO,MAAM,eAAe,IAAA,kKAAM,EAAY,CAAC,MAAQ,CAAC;QACtD,MAAM;QACN,UAAU;QACV,iBAAiB;QACjB,SAAS,CAAC,MAAM,WAAa,IAAI;gBAAE;gBAAM;gBAAU,iBAAiB,CAAC,CAAC;YAAK;QAC3E,QAAQ;YACN,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,IAAI;gBAAE,MAAM;gBAAM,UAAU;gBAAM,iBAAiB;YAAM;QAC3D;IACF,CAAC;AAWM,MAAM,eAAe,IAAA,kKAAM,EAAY,CAAC,MAAQ,CAAC;QACtD,gBAAgB;QAChB,UAAU,EAAE;QACZ,mBAAmB,CAAC,UAAY,IAAI;gBAAE,gBAAgB;YAAQ;QAC9D,YAAY,CAAC,UAAY,IAAI,CAAC,QAAU,CAAC;oBAAE,UAAU;2BAAI,MAAM,QAAQ;wBAAE;qBAAQ;gBAAC,CAAC;QACnF,eAAe,IAAM,IAAI;gBAAE,UAAU,EAAE;YAAC;QACxC,aAAa,CAAC,WAAa,IAAI;gBAAE;YAAS;IAC5C,CAAC;AAQM,MAAM,aAAa,IAAA,kKAAM,EAAU,CAAC,MAAQ,CAAC;QAClD,aAAa;QACb,eAAe,IAAM,IAAI,CAAC,QAAU,CAAC;oBAAE,aAAa,CAAC,MAAM,WAAW;gBAAC,CAAC;QACxE,gBAAgB,CAAC,OAAS,IAAI;gBAAE,aAAa;YAAK;IACpD,CAAC"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function formatDate(date: string | Date): string {\n  const d = new Date(date);\n  return new Intl.DateTimeFormat('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  }).format(d);\n}\n\nexport function formatRelativeTime(date: string | Date): string {\n  const d = new Date(date);\n  const now = new Date();\n  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000);\n\n  if (diffInSeconds < 60) return 'Just now';\n  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;\n  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\n  if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;\n  \n  return formatDate(date);\n}\n\nexport function generateUsername(name: string): string {\n  const sanitized = name.toLowerCase().replace(/[^a-z0-9]/g, '');\n  const randomSuffix = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n  return `${sanitized}${randomSuffix}`;\n}\n\nexport function downloadBlob(blob: Blob, filename: string) {\n  const url = window.URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.style.display = 'none';\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  window.URL.revokeObjectURL(url);\n  document.body.removeChild(a);\n}\n\nexport function copyToClipboard(text: string): Promise<void> {\n  return navigator.clipboard.writeText(text);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAEO,SAAS,WAAW,IAAmB;IAC5C,MAAM,IAAI,IAAI,KAAK;IACnB,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,mBAAmB,IAAmB;IACpD,MAAM,IAAI,IAAI,KAAK;IACnB,MAAM,MAAM,IAAI;IAChB,MAAM,gBAAgB,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,EAAE,OAAO,EAAE,IAAI;IAEjE,IAAI,gBAAgB,IAAI,OAAO;IAC/B,IAAI,gBAAgB,MAAM,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,IAAI,YAAY,CAAC;IAChF,IAAI,gBAAgB,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,MAAM,UAAU,CAAC;IACjF,IAAI,gBAAgB,QAAQ,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,OAAO,SAAS,CAAC;IAElF,OAAO,WAAW;AACpB;AAEO,SAAS,iBAAiB,IAAY;IAC3C,MAAM,YAAY,KAAK,WAAW,GAAG,OAAO,CAAC,cAAc;IAC3D,MAAM,eAAe,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC9E,OAAO,GAAG,YAAY,cAAc;AACtC;AAEO,SAAS,aAAa,IAAU,EAAE,QAAgB;IACvD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;IACvC,MAAM,IAAI,SAAS,aAAa,CAAC;IACjC,EAAE,KAAK,CAAC,OAAO,GAAG;IAClB,EAAE,IAAI,GAAG;IACT,EAAE,QAAQ,GAAG;IACb,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,EAAE,KAAK;IACP,OAAO,GAAG,CAAC,eAAe,CAAC;IAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;AAC5B;AAEO,SAAS,gBAAgB,IAAY;IAC1C,OAAO,UAAU,SAAS,CAAC,SAAS,CAAC;AACvC"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/components/ui/Button.tsx"],"sourcesContent":["import * as React from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'default' | 'outline' | 'ghost' | 'destructive';\n  size?: 'default' | 'sm' | 'lg' | 'icon';\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = 'default', size = 'default', ...props }, ref) => {\n    return (\n      <button\n        className={cn(\n          'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n          {\n            'bg-primary text-primary-foreground hover:bg-primary/90': variant === 'default',\n            'border border-input bg-background hover:bg-accent hover:text-accent-foreground': variant === 'outline',\n            'hover:bg-accent hover:text-accent-foreground': variant === 'ghost',\n            'bg-destructive text-destructive-foreground hover:bg-destructive/90': variant === 'destructive',\n          },\n          {\n            'h-10 px-4 py-2': size === 'default',\n            'h-9 rounded-md px-3': size === 'sm',\n            'h-11 rounded-md px-8': size === 'lg',\n            'h-10 w-10': size === 'icon',\n          },\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOA,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG,OAAO,EAAE;IAC/D,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,wQACA;YACE,0DAA0D,YAAY;YACtE,kFAAkF,YAAY;YAC9F,gDAAgD,YAAY;YAC5D,sEAAsE,YAAY;QACpF,GACA;YACE,kBAAkB,SAAS;YAC3B,uBAAuB,SAAS;YAChC,wBAAwB,SAAS;YACjC,aAAa,SAAS;QACxB,GACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/components/ui/Input.tsx"],"sourcesContent":["import * as React from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = 'Input';\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,kHAAE,EACX,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/components/ui/Card.tsx"],"sourcesContent":["import * as React from 'react';\nimport { cn } from '@/lib/utils';\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'rounded-lg border bg-card text-card-foreground shadow-sm',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nCard.displayName = 'Card';\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex flex-col space-y-1.5 p-6', className)}\n      {...props}\n    />\n  )\n);\nCardHeader.displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3\n      ref={ref}\n      className={cn('text-2xl font-semibold leading-none tracking-tight', className)}\n      {...props}\n    />\n  )\n);\nCardTitle.displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => (\n    <p\n      ref={ref}\n      className={cn('text-sm text-muted-foreground', className)}\n      {...props}\n    />\n  )\n);\nCardDescription.displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n  )\n);\nCardContent.displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex items-center p-6 pt-0', className)}\n      {...props}\n    />\n  )\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAC3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAIf,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAIf,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CACtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAIf,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAGlE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAIf,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/My%20Pc/Downloads/therapy-dashboard-improved-v2%20%281%29/therapy-dashboard-improved-v2/app/user/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { apiClient, API_ENDPOINTS, getUserType } from '@/lib/api';\nimport { useChatStore, useAuthStore } from '@/lib/store';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Card } from '@/components/ui/Card';\nimport toast, { Toaster } from 'react-hot-toast';\nimport {\n  MessageSquare,\n  Plus,\n  Send,\n  Mic,\n  FileText,\n  Download,\n  LogOut,\n  Menu,\n  X,\n  Loader2,\n  User,\n  Bot,\n} from 'lucide-react';\nimport { Session, Message } from '@/lib/types';\nimport { formatRelativeTime } from '@/lib/utils';\n\nexport default function UserDashboard() {\n  const router = useRouter();\n  const logout = useAuthStore((state) => state.logout);\n  const { currentSession, messages, setCurrentSession, addMessage, clearMessages, setMessages } =\n    useChatStore();\n\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [inputMessage, setInputMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    const userType = getUserType();\n    if (userType !== 'user') {\n      router.push('/login');\n      return;\n    }\n    fetchSessions();\n  }, [router]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const fetchSessions = async () => {\n  try {\n    const response = await apiClient.get(API_ENDPOINTS.SESSION_MY_SESSIONS);\n\n    // Ensure sessions is always an array\n    const sessionArray = Array.isArray(response.data)\n      ? response.data\n      : response.data.sessions || [];\n\n    setSessions(sessionArray);\n  } catch (error) {\n    toast.error('Failed to load sessions');\n  }\n};\n\n\n  const createNewSession = async () => {\n    try {\n      const response = await apiClient.post(API_ENDPOINTS.SESSION_CREATE, {});\n      setCurrentSession(response.data);\n      clearMessages();\n      setSessions([response.data, ...sessions]);\n      toast.success('New session created');\n    } catch (error) {\n      toast.error('Failed to create session');\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!inputMessage.trim() || !currentSession) return;\n\n    const userMessage: Message = {\n      role: 'user',\n      content: inputMessage,\n      timestamp: new Date().toISOString(),\n    };\n\n    addMessage(userMessage);\n    setInputMessage('');\n    setLoading(true);\n\n    try {\n      const response = await apiClient.post(API_ENDPOINTS.CHAT_MESSAGE, {\n        session_id: currentSession.session_id,\n        message: inputMessage,\n      });\n\n      const botMessage: Message = {\n        role: 'assistant',\n        content: response.data.bot_response,\n        timestamp: response.data.timestamp,\n      };\n\n      addMessage(botMessage);\n    } catch (error: any) {\n      toast.error('Failed to send message');\n      // Remove the user message if sending failed\n      // In a production app, you'd want better error handling\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAudioUpload = async (file: File) => {\n    if (!currentSession) return;\n\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('audio', file);\n      formData.append('session_id', currentSession.session_id);\n\n      const response = await apiClient.post(API_ENDPOINTS.CHAT_AUDIO, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n      });\n\n      const userMessage: Message = {\n        role: 'user',\n        content: response.data.transcription,\n        timestamp: response.data.timestamp,\n      };\n\n      const botMessage: Message = {\n        role: 'assistant',\n        content: response.data.bot_response,\n        timestamp: response.data.timestamp,\n      };\n\n      addMessage(userMessage);\n      addMessage(botMessage);\n      toast.success('Audio message sent');\n    } catch (error) {\n      toast.error('Failed to process audio');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateReport = async () => {\n    if (!currentSession) {\n      toast.error('No active session');\n      return;\n    }\n\n    if (messages.length === 0) {\n      toast.error('Cannot generate report for empty session');\n      return;\n    }\n\n    const toastId = toast.loading('Analyzing session...');\n\n    try {\n      // First analyze the session\n      toast.loading('Analyzing conversation...', { id: toastId });\n      await apiClient.post(API_ENDPOINTS.SESSION_ANALYZE(currentSession.session_id));\n\n      // Then generate report\n      toast.loading('Generating report...', { id: toastId });\n      const response = await apiClient.post(\n        API_ENDPOINTS.REPORT_GENERATE(currentSession.session_id),\n        { include_conversation: true }\n      );\n\n      toast.success('Report generated successfully!', { id: toastId });\n\n      // Wait a moment before downloading\n      setTimeout(() => {\n        downloadReport();\n      }, 500);\n    } catch (error: any) {\n      console.error('Report generation error:', error);\n      \n      let errorMessage = 'Failed to generate report';\n      if (error.response?.data?.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.response?.status === 400) {\n        errorMessage = 'Session must be analyzed before generating report';\n      } else if (error.response?.status === 404) {\n        errorMessage = 'Session not found';\n      }\n      \n      toast.error(errorMessage, { id: toastId });\n    }\n  };\n\n  const downloadReport = async () => {\n    if (!currentSession) {\n      toast.error('No active session');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading report...', { id: 'download' });\n\n      const response = await apiClient.get(\n        API_ENDPOINTS.REPORT_DOWNLOAD(currentSession.session_id),\n        { \n          responseType: 'blob',\n          timeout: 30000 // 30 second timeout\n        }\n      );\n\n      // Check if we received valid data\n      if (!response.data || response.data.size === 0) {\n        throw new Error('Empty response received');\n      }\n\n      // Create blob with explicit type\n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `therapy_report_${currentSession.session_id}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      \n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n      }, 100);\n\n      toast.success('Report downloaded successfully!', { id: 'download' });\n    } catch (error: any) {\n      console.error('Download error:', error);\n      \n      let errorMessage = 'Failed to download report';\n      \n      if (error.response?.status === 404) {\n        errorMessage = 'Report not found. Please generate a report first.';\n      } else if (error.response?.status === 403) {\n        errorMessage = 'You do not have permission to download this report.';\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Download timeout. Please try again.';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast.error(errorMessage, { id: 'download' });\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    router.push('/login');\n  };\n\n  return (\n    <div className=\"h-screen w-screen flex bg-black text-white overflow-hidden\">\n      <Toaster position=\"top-right\" />\n\n      {/* Sidebar */}\n      <aside\n        className={`${\n          sidebarOpen ? 'w-80' : 'w-0'\n        } bg-gray-900 border-r border-gray-800 transition-all duration-300 flex flex-col overflow-hidden`}\n      >\n        <div className=\"p-4 border-b border-gray-800\">\n          <Button\n            onClick={createNewSession}\n            className=\"w-full bg-white text-black hover:bg-gray-200\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Chat\n          </Button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\n          {sessions.map((session) => (\n            <button\n              key={session.session_id}\n              onClick={() => {\n                setCurrentSession(session);\n                // Load session messages here\n                clearMessages();\n              }}\n              className={`w-full text-left p-3 rounded-lg transition-colors ${\n                currentSession?.session_id === session.session_id\n                  ? 'bg-gray-800 text-white'\n                  : 'text-gray-400 hover:bg-gray-800/50 hover:text-white'\n              }`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <MessageSquare className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium truncate\">\n                  Session {session.session_id.slice(0, 8)}\n                </span>\n              </div>\n             \n            </button>\n          ))}\n        </div>\n\n        <div className=\"p-4 border-t border-gray-800\">\n          <button\n            onClick={handleLogout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n          >\n            <LogOut className=\"w-5 h-5\" />\n            <span>Logout</span>\n          </button>\n        </div>\n      </aside>\n\n      {/* Main Chat Area */}\n      <main className=\"flex-1 flex flex-col\">\n        {/* Header */}\n        <header className=\"bg-gray-900/50 backdrop-blur-xl border-b border-gray-800 px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\n            >\n              {sidebarOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n            </button>\n            <h1 className=\"text-lg font-semibold\">\n              {currentSession ? 'Therapy Session' : 'Select or create a session'}\n            </h1>\n          </div>\n\n          {currentSession && messages.length > 0 && (\n            <Button\n              onClick={generateReport}\n              variant=\"outline\"\n              className=\"border-gray-700 text-white hover:bg-gray-800\"\n            >\n              <FileText className=\"w-4 h-4 mr-2\" />\n              Generate Report\n            </Button>\n          )}\n        </header>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {!currentSession ? (\n            <div className=\"h-full flex items-center justify-center\">\n              <Card className=\"border-gray-800 bg-gray-900/50 p-8 text-center max-w-md\">\n                <MessageSquare className=\"w-16 h-16 mx-auto mb-4 text-gray-600\" />\n                <h2 className=\"text-xl font-semibold mb-2\">Start a New Session</h2>\n                <p className=\"text-gray-400 mb-6\">\n                  Create a new therapy session to begin your conversation\n                </p>\n                <Button\n                  onClick={createNewSession}\n                  className=\"bg-white text-black hover:bg-gray-200\"\n                >\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Create Session\n                </Button>\n              </Card>\n            </div>\n          ) : messages.length === 0 ? (\n            <div className=\"h-full flex items-center justify-center\">\n              <div className=\"text-center max-w-2xl\">\n                <h2 className=\"text-2xl font-semibold mb-4\">How can I help you today?</h2>\n                <p className=\"text-gray-400 mb-8\">\n                  Share your thoughts and feelings. I'm here to listen and support you.\n                </p>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <Card\n                    className=\"border-gray-800 bg-gray-900/50 p-6 cursor-pointer hover:bg-gray-800/50 transition-colors\"\n                    onClick={() => setInputMessage(\"I've been feeling stressed lately...\")}\n                  >\n                    <p className=\"text-sm\">I've been feeling stressed lately...</p>\n                  </Card>\n                  <Card\n                    className=\"border-gray-800 bg-gray-900/50 p-6 cursor-pointer hover:bg-gray-800/50 transition-colors\"\n                    onClick={() => setInputMessage(\"I need help managing my anxiety...\")}\n                  >\n                    <p className=\"text-sm\">I need help managing my anxiety...</p>\n                  </Card>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"max-w-3xl mx-auto space-y-6\">\n              {messages.map((message, index) => (\n                <div\n                  key={index}\n                  className={`flex gap-4 ${\n                    message.role === 'user' ? 'justify-end' : 'justify-start'\n                  }`}\n                >\n                  {message.role === 'assistant' && (\n                    <div className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0\">\n                      <Bot className=\"w-5 h-5\" />\n                    </div>\n                  )}\n                  <div\n                    className={`max-w-[80%] ${\n                      message.role === 'user'\n                        ? 'bg-white text-black'\n                        : 'bg-gray-800 text-white'\n                    } rounded-2xl px-6 py-4`}\n                  >\n                    <p className=\"whitespace-pre-wrap\">{message.content}</p>\n                    \n                  </div>\n                  {message.role === 'user' && (\n                    <div className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0\">\n                      <User className=\"w-5 h-5\" />\n                    </div>\n                  )}\n                </div>\n              ))}\n              {loading && (\n                <div className=\"flex gap-4 justify-start\">\n                  <div className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center\">\n                    <Bot className=\"w-5 h-5\" />\n                  </div>\n                  <div className=\"bg-gray-800 rounded-2xl px-6 py-4\">\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  </div>\n                </div>\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n          )}\n        </div>\n\n        {/* Input Area */}\n        {currentSession && (\n          <div className=\"border-t border-gray-800 p-6\">\n            <div className=\"max-w-3xl mx-auto\">\n              <div className=\"flex gap-3\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"audio/*\"\n                  onChange={(e) => e.target.files?.[0] && handleAudioUpload(e.target.files[0])}\n                  className=\"hidden\"\n                />\n               \n                <Input\n                  type=\"text\"\n                  placeholder=\"Type your message...\"\n                  value={inputMessage}\n                  onChange={(e) => setInputMessage(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && sendMessage()}\n                  className=\"flex-1 bg-gray-900 border-gray-700 text-white\"\n                  disabled={loading}\n                />\n                <Button\n                  onClick={sendMessage}\n                  disabled={loading || !inputMessage.trim()}\n                  className=\"bg-white text-black hover:bg-gray-200\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </Button>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2 text-center\">\n                Press Enter to send, Shift + Enter for new line\n              </p>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}